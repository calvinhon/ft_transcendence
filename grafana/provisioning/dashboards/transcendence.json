{
  "title": "Transcendence Monitoring",
  "tags": ["transcendence", "monitoring"],
  "timezone": "browser",
  "panels": [
    {
      "id": 1,
      "title": "Prometheus Status",
      "targets": [
        {
          "expr": "up{job=\"prometheus\"}",
          "legendFormat": "Prometheus"
        }
      ],
      "type": "stat",
      "gridPos": {
        "h": 8,
        "w": 6,
        "x": 0,
        "y": 0
      },
      "fieldConfig": {
        "defaults": {
          "custom": {},
          "mappings": [
            {
              "type": "value",
              "options": {
                "0": {
                  "text": "Down",
                  "color": "red"
                },
                "1": {
                  "text": "Up",
                  "color": "green"
                }
              }
            }
          ]
        }
      }
    },
    {
      "id": 2,
      "title": "Vault Status",
      "targets": [
        {
          "expr": "up{job=\"vault\"}",
          "legendFormat": "Vault"
        }
      ],
      "type": "stat",
      "gridPos": {
        "h": 8,
        "w": 6,
        "x": 6,
        "y": 0
      },
      "fieldConfig": {
        "defaults": {
          "custom": {},
          "mappings": [
            {
              "type": "value",
              "options": {
                "0": {
                  "text": "Down",
                  "color": "red"
                },
                "1": {
                  "text": "Up",
                  "color": "green"
                }
              }
            }
          ]
        }
      }
    },
    {
      "id": 3,
      "title": "Service Availability",
      "targets": [
        {
          "expr": "up{job=~\"prometheus|vault\"}",
          "legendFormat": "{{job}}"
        }
      ],
      "type": "graph",
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 0
      },
      "options": {
        "legend": {
          "calcs": ["mean", "lastNotNull"],
          "values": false
        }
      }
    },
    {
      "id": 4,
      "title": "Prometheus Uptime",
      "targets": [
        {
          "expr": "time() - process_start_time_seconds{job=\"prometheus\"}",
          "legendFormat": "Seconds Running"
        }
      ],
      "type": "stat",
      "gridPos": {
        "h": 8,
        "w": 6,
        "x": 0,
        "y": 8
      },
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "custom": {},
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "red",
                "value": null
              },
              {
                "color": "yellow",
                "value": 300
              },
              {
                "color": "green",
                "value": 3600
              }
            ]
          }
        }
      }
    },
    {
      "id": 5,
      "title": "Vault Uptime",
      "targets": [
        {
          "expr": "time() - process_start_time_seconds{job=\"vault\"}",
          "legendFormat": "Seconds Running"
        }
      ],
      "type": "stat",
      "gridPos": {
        "h": 8,
        "w": 6,
        "x": 6,
        "y": 8
      },
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "custom": {},
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "red",
                "value": null
              },
              {
                "color": "yellow",
                "value": 300
              },
              {
                "color": "green",
                "value": 3600
              }
            ]
          }
        }
      }
    },
    {
      "id": 6,
      "title": "Prometheus Memory Usage",
      "targets": [
        {
          "expr": "process_resident_memory_bytes{job=\"prometheus\"}",
          "legendFormat": "Memory (bytes)"
        }
      ],
      "type": "stat",
      "gridPos": {
        "h": 8,
        "w": 6,
        "x": 12,
        "y": 8
      },
      "fieldConfig": {
        "defaults": {
          "unit": "bytes",
          "custom": {},
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "yellow",
                "value": 536870912
              },
              {
                "color": "red",
                "value": 1073741824
              }
            ]
          }
        }
      }
    },
    {
      "id": 7,
      "title": "Prometheus CPU Time",
      "targets": [
        {
          "expr": "rate(process_cpu_seconds_total{job=\"prometheus\"}[5m])",
          "legendFormat": "CPU Seconds/sec"
        }
      ],
      "type": "stat",
      "gridPos": {
        "h": 8,
        "w": 6,
        "x": 18,
        "y": 8
      },
      "fieldConfig": {
        "defaults": {
          "custom": {},
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "yellow",
                "value": 0.5
              },
              {
                "color": "red",
                "value": 1.0
              }
            ]
          }
        }
      }
    },
    {
      "id": 8,
      "title": "Microservices Health Check",
      "type": "text",
      "gridPos": {
        "h": 12,
        "w": 24,
        "x": 0,
        "y": 16
      },
      "options": {
        "content": "## Microservices Health Status & Quick Links\n\n### Current Status\nAll 4 microservices are running and healthy. Prometheus metrics endpoints will be available after implementing @fastify/metrics.\n\n### Quick Health Checks\n\n| Service | Port | Health Check |\n|---------|------|---------------|\n| **Auth Service** | 3001 | `curl http://localhost:3001/health` |\n| **Game Service** | 3002 | `curl http://localhost:3002/health` |\n| **Tournament Service** | 3003 | `curl http://localhost:3003/health` |\n| **User Service** | 3004 | `curl http://localhost:3004/health` |\n\n### Service Features\n\n**Auth Service (3001)**\n- User registration and login\n- JWT token generation\n- Session management\n- Endpoints: POST /register, POST /login\n\n**Game Service (3002)**\n- Game state management\n- AI opponent support\n- Matchmaking\n- WebSocket support for real-time gameplay\n\n**Tournament Service (3003)**\n- Tournament creation and management\n- Bracket generation\n- Match scheduling\n- Leaderboard management\n\n**User Service (3004)**\n- User profile management\n- Statistics tracking\n- Friendship system\n- Achievement tracking\n\n### Future Enhancements - Add Prometheus Metrics\n\nTo enable full metrics monitoring across all services, add the `@fastify/metrics` plugin:\n\n```typescript\n// In each service's src/server.ts\nimport metricsPlugin from '@fastify/metrics';\n\nawait fastify.register(metricsPlugin, {\n  defaultMetrics: { enabled: true },\n  routeMetrics: { enabled: true }\n});\n\n// Services will then expose:\n// - http://localhost:PORT/metrics\n// - Request count & rate per endpoint\n// - Response latency (p50, p95, p99)\n// - Error rates by endpoint\n// - Memory and CPU usage\n```\n\nOnce implemented, this dashboard will automatically show:\n- ğŸ“Š Request throughput per service\n- â±ï¸ Response time percentiles\n- âŒ Error rates and failure analysis\n- ğŸ’¾ Memory consumption trends\n- âš™ï¸ CPU usage by service\n- ğŸ”„ Request queue depth\n\n### Monitoring Stack Architecture\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚      Microservices (Fastify)            â”‚\nâ”‚  Auth â”‚ Game â”‚ Tournament â”‚ User        â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n             â”‚ (with @fastify/metrics)\n             â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚      Prometheus Scraper                 â”‚\nâ”‚  - 30s scrape interval                  â”‚\nâ”‚  - 15 minute data retention             â”‚\nâ”‚  - Multi-target support                 â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n             â”‚\n             â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚      Grafana Dashboard                  â”‚\nâ”‚  - Real-time visualization              â”‚\nâ”‚  - Alerting rules                       â”‚\nâ”‚  - Performance trends                   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### Health Check Response Example\n\n```json\n{\n  \"status\": \"healthy\",\n  \"service\": \"auth-service\",\n  \"timestamp\": \"2025-12-09T15:30:00.000Z\",\n  \"modules\": [\"auth\", \"database\", \"jwt\"]\n}\n```\n",
        "mode": "markdown"
      }
    }
    ],
    "refresh": "30s",
    "schemaVersion": 30,
    "style": "dark",
    "templating": {
      "list": []
    },
    "time": {
      "from": "now-1h",
      "to": "now"
    },
    "timepicker": {},
    "uid": "transcendence-main",
    "version": 1
}
